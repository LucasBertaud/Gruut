{% extends 'base.html.twig' %}

{% block title %}Profil
{% endblock %}

{% block css %}
	<link rel="stylesheet" href="{{asset('assets/css/profile.css')}}">
	<script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
{% endblock %}

{% block content %}

	<header id="head" class="secondary" style="min-height: 80px; height:0px"></header>
	<style>
		.secondary {
			background: none !important;
		}

		.navbar-inverse {
			background-color: #038C17;
			opacity: 1;
		}

		.top-space {
			margin-top: 0px !important;
		}

		.profile-head h5{
    color: #333;
}

.emp-profile{
    padding: 3%;
    margin-top: 3%;
    margin-bottom: 3%;
    border-radius: 0.5rem;
    background: #fff;
}



.profile-head h6{
    color: #0062cc;
}
.profile-edit-btn{
    border: none;
    border-radius: 1.5rem;
    width: 70%;
    padding: 2%;
    font-weight: 600;
    color: #6c757d;
    cursor: pointer;
}
.proile-rating{
    font-size: 12px;
    color: #818182;
    margin-top: 5%;
}
.proile-rating span{
    color: #495057;
    font-size: 15px;
    font-weight: 600;
}
.profile-head .nav-tabs{
    margin-bottom:5%;
}
.profile-head .nav-tabs .nav-link{
    font-weight:600;
    border: none;
}
.profile-head .nav-tabs .nav-link.active{
    border: none;
    border-bottom:2px solid #0062cc;
}
.profile-work{
    padding: 14%;
    margin-top: -15%;
}
.profile-work p{
    font-size: 12px;
    color: #818182;
    font-weight: 600;
    margin-top: 10%;
}
.profile-work a{
    text-decoration: none;
    color: #495057;
    font-weight: 600;
    font-size: 14px;
}
.profile-work ul{
    list-style: none;
}
.profile-tab label{
    font-weight: 600;
}
.profile-tab p{
    font-weight: 600;
    color: #0062cc;
}


	</style>
	{# <div class="row">
		<div class="col-md-3 text-center" style="background-color: #EDEDED; border-right: 2px solid #898989">
			<div class="left-profile-container">
				<img src="{{ asset("assets/images/profil_img.png") }}" alt="">
				<h1 class="profileName">{{user.firstname}}
					{{user.lastname}}</h1>
			</div>
			<h3 class="profileDiv">Compte</h3>
			<br>
			<div class="my-profile btn btn-block center-block" style="background: #F4F8FF; width: 20vw;height: 64px; line-height: 8vh; ">
				<a href="{{path("profile_index")}}" class=""><i class="fa-regular fa-id-badge" style=" margin-right:1vw;"></i>Votre profil </a>
			</div>
			<br>
			<div class="my-adress btn btn-block center-block" style="background: #F4F8FF;  width: 20vw;height: 64px; line-height: 8vh;">
				<a href="{{path("address_recap")}}"><i class="fa-solid fa-box" style=" margin-right:1vw;"></i>Vos adresses</a>
			</div>
			<br>
			<div class="my-data btn btn-block center-block" style="background: #F4F8FF;  width: 20vw;height: 64px; line-height: 8vh;">
				<a href="{{path("profile_data")}}"><i class="fa-solid fa-database" style=" margin-right:1vw;"></i>Vos données</a>
			</div><br>
			<div class="my-data btn btn-block center-block" style="background: #F4F8FF; margin-bottom:5vh; width: 20vw; height: 64px; line-height: 8vh;">
<a href="{{path("profile_delete_account")}}?resetSession={{true}}">
	<i class="fa-solid fa-trash" style=" margin-right:1vw;"></i>Supprimer son compte</a>

					
			</div>


			<h3 class="profileDiv">Achats</h3> <br>
			<div class="my-order btn btn-block center-block" style="background: #F4F8FF; width: 20vw;height: 64px; line-height: 8vh;">
				<a href="{{path("profile_order_follow")}}"><i class="fa-solid fa-basket-shopping" style=" margin-right:1vw;"></i>Commandes et suivis </a>
			</div><br>
			<div class="bill btn btn-block center-block" style="background: #F4F8FF; margin-bottom:5vh;  width: 20vw;height: 64px; line-height: 8vh;">
				<a href="{{path("profile_bill")}}">
				<i class="fa-solid fa-file-invoice" style=" margin-right:1vw;"></i>
				Factures	</a>
			</div>
			<div class="profileDiv">
				<div class="log-out btn btn-block center-block" style="background: #F4F8FF; margin-bottom:5vh;  margin-top:3vh;  width: 20vw;height: 64px; line-height: 8vh;">
					
					<a href="{{path("app_logout")}}"><i class="fa-solid fa-power-off" style=" margin-right:1vw;"></i> Se déconnecter</a>
				</div>
			</div>
		</div>

		<div class="col-md-9 text-center">
			<h1 style="margin-bottom: 5vh;">Profil</h1>
			<div class="row">
					<div class="col-md-6">
						<p style="font-size: 16px;">{% if user.gender == "Homme" %}<i class="fa-solid fa-mars" style="font-size: 20px;"></i>{% else %}<i class="fa-solid fa-venus"></i>{% endif %}  Civilité : {{user.gender}}</p><br>		
						<p style="font-size: 16px;">Nom : {{user.lastname}}</p> <br>			
						<p style="font-size: 16px;">	Prénom : {{user.firstname}}</p>	
					</div>

					<div class="col-md-6">
						
						<p style="font-size: 16px;"><i class="fa-solid fa-envelope" style="font-size: 20px; margin-right:1vw;"></i> Email : {{user.email}}</p><br>
					</div>
				</div>
			<hr>

			<i class="fa-solid fa-pencil"></i>
			<a href="{{path("profile_modify", {'id' : id})}}">Modifier le profil</a>


			<hr>

			<i class="fa-solid fa-lock"></i>
			<a href="{{path('profile_change_password', {'id' : id})}}">Modifier le mot de passe</a>


			<hr>

		</div>
	</div> #}



	<div class="container emp-profile" style="margin-top:5vh;">
            <form method="post">
                <div class="row">
                    <div class="col-md-4">
                        <div class="profile-img">
                           <div class="left-profile-container">
								<img src="{{ asset("assets/images/profil_img.png") }}" alt="">
								<h1 class="profileName">{{user.firstname}} {{user.lastname}}</h1>
									
							</div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="profile-head">
                                    <h4>
                                        {{user.firstname}} {{user.lastname}}
                                    </h4>
                            <ul class="nav nav-tabs" id="myTab" role="tablist">
                                <li class="nav-item">
                                    <a class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true" style="color:green !important;">Profil</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" id="profile-tab" data-toggle="tab" href="#profile" role="tab" aria-controls="profile" aria-selected="false"  style="color:green !important;">Adresse</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" id="data-tab" data-toggle="tab" href="#data" role="tab" aria-controls="data" aria-selected="false"  style="color:green !important;">Données</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="col-md-2">
                        <a href="{{path("profile_modify", {'id' : id})}}"><input type="bmit" class="profile-edit-btn" name="btnAddMore" value="Edit Profile"/></a>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4">
                         <div class="profile-work">
                            <p>Compte</p>
                            <a href="{{path("profile_index")}}">Votre Profil</a><br/>
                            <a href="{{path("profile_index")}}">Votre Adresse</a><br/>
                            <a href="{{path("profile_index")}}">Vos données</a>
                            <p>Achats</p>
                            <a href="{{path("profile_order_follow")}}">Commande et suivis</a><br/>
                            <a href="{{path("profile_order_follow")}}">Facture</a><br/>
							<p>Autre</p>
                            <a href="{{path('profile_delete_account')}}?resetSession={{true}}">Supprimer son compte</a><br/>
                            <a href="{{path("app_logout")}}">Se déconnecter</a>
                        </div> 
                    </div>
                    <div class="col-md-8">
                        <div class="tab-content profile-tab" id="myTabContent">
                            <div class="tab-pane active" id="home" role="tabpanel" aria-labelledby="home-tab">			
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>Gender</label>
                                            </div>
                                            <div class="col-md-6">
                                                <p>{% if user.gender == "Homme" %}<i class="fa-solid fa-mars" style="font-size: 20px;"></i>{% else %}<i class="fa-solid fa-venus"></i>{% endif %}{{user.gender}}</p>
                                            </div>
                                        </div><hr>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>Name</label>
                                            </div>
                                            <div class="col-md-6">
                                                <p>{{user.lastname}}</p>
                                            </div>
                                        </div><hr>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>Surname</label>
                                            </div>
                                            <div class="col-md-6">
                                                <p>{{user.firstname}}</p>
                                            </div>
                                        </div><hr>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>Email</label>
                                            </div>
                                            <div class="col-md-6">
                                                <p>{{user.email}}</p>
                                            </div>
                                        </div><hr>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <label>Phone</label>
                                            </div>
                                            <div class="col-md-6">
                                                <p>123 456 7890</p>
                                            </div>
                                        </div><hr>
                            </div>
							
                            <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">
                                        <div class="row">
                                        <a href="{{path("address_index")}}" class="text-center">Ajouter une adresse</a><hr>
                                            
                                            <div class="col-md-6">
                                                <label>Adresse:</label>
                                            </div>
                                            <div class="col-md-6">
											{% for adress in address %}
                                                <p>{{adress.address}}</p>
                                                <p>{{adress.postal}}, {{adress.city}}, {{adress.country}} </p>
                                           
											{% endfor %} </div><hr>
                                        </div>
                            </div>
                            <div class="tab-pane fade" id="data" role="tabpanel" aria-labelledby="profile-tab">
                                        <div class="row">
                                            <div class="col-md-12">
												<h1 class="text-center">Vos données</h1><br>
												<p  style="color:grey !important">Nous prenons la protection de vos données personnelle au sérieux. Conformément au règlement RGPD, nous voulons vous informer de la collecte, de l'utilisation et de la conservation de vos données. Vous avez le droit de savoir quelles informations nous détenons sur vous et comment nous les utilisons. Veuillez nous contacter si vous avez des questions ou des préoccupations concernant vos données.</p>
												<br>
                                                {% if passwordIsVerif == false %}
												<p  style="color:grey !important">Pour pouvoir télécharger vos données, veuillez entrez votre mot de passe.</p>
												<br>
                                                {% else %}        
                                                <p>Vous pouvez télécharger vos données d'utilisateur juste en dessous.</p>
                                                {% endif %}
												<div style="padding: 5vh;">
                                                    {% if passwordIsVerif == true %}
                                                    <a href="{{ path('profile_data_YAML_download') }}">Télécharger les données en YAML</a>
                                                    -
                                                    <a href="{{ path('profile_data_JSON_download') }}">Télécharger les données en JSON</a>
                                                    {% else %}
                                                        {{ form_start(passwordVerif) }}
                                                        {{ form_row(passwordVerif.passwordverif) }}
                                                        <button class="btn btn-primary" style="float:right;">Confirmez</button>
                                                        {{ form_end(passwordVerif) }} 
                                                    {% endif %}
												</div>
                                            </div>
											
                                        </div><hr>
                            </div>
                        </div>
                    </div>
                </div>
            </form>         
        </div>
{% endblock %}

{% block script%}
<script>

var oneach = document.querySelectorAll(".onclick");

var about = document.querySelector('#home-tab');
var address = document.querySelector('#profile-tab');
let value = 1;



oneach.forEach(function(one){
	$url = one.href;
	one.addEventListener("click", function(){
if(one.href == "http://5.135.101.252:8000/profil/#home"){
        value = 1;
    }
    else{
        value = 2
    }
    console.log(value)
		$.ajax({
			url: $url,
			type:'POST',
			data:{value: value}
		})

	})
})


</script>

{% endblock %}